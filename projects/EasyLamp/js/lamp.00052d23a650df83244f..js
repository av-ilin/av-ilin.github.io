function _defineProperty(e,a,t){return(a=_toPropertyKey(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function _toPropertyKey(e){var a=_toPrimitive(e,"string");return"symbol"==typeof a?a:String(a)}function _toPrimitive(e,a){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,a||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}class LampManager{static async update(){console.log("start upd");let e=await LampApi.get();if(null==e)return console.log("Повторный запрос через 5 секунд!"),void setTimeout((()=>{LampManager.update()}),5e3);console.log(e),LampManager.data=e,LampManager._status.data=!0,LampManager._status.images=new Array(e.length,!1),e.forEach(((e,a)=>{let t=LampManager.createLamp(e,a);LampManager.elems.lampsBox.append(t)})),LampManager.loadOff(),console.log("end upd")}static createLamp(e,a){let t=LampManager.loaderSrc,r=document.createElement("img");r.src=t;let m=document.createElement("div");return m.className="lamp-list__item",m.append(r),fetch(e.image).then((e=>e.blob())).then((e=>{t=URL.createObjectURL(e),r.src=t,LampManager._status.images[a]=!0,a==LampManager.activeLamp&&(LampManager.elems.lampReview.src=t,LampManager.elems.lampReview.classList.remove("load"),LampManager.elems.lampInterier.src=t,LampManager.elems.lampInterier.classList.remove("load"),setTimeout((()=>{Lighter.upd()}),100))})),m.onclick=()=>{LampManager.elems.lampsBox.children[LampManager.activeLamp].classList.remove("active"),m.classList.add("active"),LampManager.activeLamp=a,LampManager.elems.material.textContent=e.material,LampManager.elems.dimensions.textContent=`H ${e.height} x W ${e.width}`,LampManager.elems.weight.textContent=`${e.weight} kg`,LampManager.elems.electrification.textContent=e.electrification,t!=LampManager.loaderSrc||LampManager.elems.lampReview.classList.contains("load")?t!=LampManager.loaderSrc&&LampManager.elems.lampReview.classList.contains("load")&&(LampManager.elems.lampReview.classList.remove("load"),LampManager.elems.lampInterier.classList.remove("load")):(LampManager.elems.lampReview.classList.add("load"),LampManager.elems.lampInterier.classList.add("load")),LampManager.elems.lampReview.src=t,LampManager.elems.lampInterier.src=t,Lighter.switch(),setTimeout((()=>{Lighter.upd()}),100)},m}static loadOff(){LampManager.elems.lampDesc.classList.remove("load"),LampManager.elems.lampsBox.children[0].onclick()}static get status(){return LampManager._status.data&&LampManager._status.images.every((e=>1==e))}static isDark(){return null!=LampManager.data&&LampManager.data[LampManager.activeLamp].isDarkMode}}_defineProperty(LampManager,"loaderSrc","images/loader.gif"),_defineProperty(LampManager,"_status",{data:!1,images:[]}),_defineProperty(LampManager,"activeLamp",0),_defineProperty(LampManager,"data",void 0),_defineProperty(LampManager,"elems",{lampsBox:document.getElementById("lampsBox"),lampReview:document.getElementById("lampReview"),lampInterier:document.getElementById("lampInterier"),interier:document.getElementById("interier"),lampDesc:document.getElementById("lampDesc"),material:document.getElementById("material"),dimensions:document.getElementById("dimensions"),weight:document.getElementById("weight"),electrification:document.getElementById("electrification")});